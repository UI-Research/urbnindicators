<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>urbnindicators • urbnindicators</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="urbnindicators">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">urbnindicators</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Unreleased version">0.0.0.9301</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/urbnindicators.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/codebook.html">codebook</a></li>
    <li><a class="dropdown-item" href="../articles/design-philosophy.html">Design Philosophy</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>urbnindicators</h1>
            
      

      <div class="d-none name"><code>urbnindicators.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ui-research.github.io/urbnindicators/">urbnindicators</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://walker-data.com/tidycensus/" class="external-link">tidycensus</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://stringr.tidyverse.org" class="external-link">stringr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://scales.r-lib.org" class="external-link">scales</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/UrbanInstitute/urbnthemes" class="external-link">urbnthemes</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Setting Mac/Linux options...</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'urbnthemes'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:ggplot2':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     geom_bar, geom_col, scale_color_discrete, scale_color_gradientn,</span></span>
<span><span class="co">#&gt;     scale_color_ordinal, scale_colour_discrete, scale_colour_gradientn,</span></span>
<span><span class="co">#&gt;     scale_colour_ordinal, scale_fill_discrete, scale_fill_gradientn,</span></span>
<span><span class="co">#&gt;     scale_fill_ordinal</span></span></code></pre></div>
<p>This vignette is organized into three parts:</p>
<ol style="list-style-type: decimal">
<li><p>We illustrate a typical workflow for obtaining American Community
Survey (ACS) data using <code><a href="https://walker-data.com/tidycensus/" class="external-link">library(tidycensus)</a></code>.</p></li>
<li><p>We show how <code>urbnindicators</code> can produce similar
outputs, but with much less code and effort.</p></li>
<li><p>We highlight how <code>urbnindicators</code> provides metadata
and improves the quality and reliability of the analysis
process.</p></li>
</ol>
<div class="section level2">
<h2 id="a-typical-workflow">A Typical Workflow<a class="anchor" aria-label="anchor" href="#a-typical-workflow"></a>
</h2>
<p><a href="https://walker-data.com/tidycensus/index.html" class="external-link"><strong>tidycensus</strong></a>
provides a suite of functions for working with ACS data in R. In fact,
<code>urbnindicators</code> is built on top of <code>tidycensus</code>,
and we highly encourage those who are unfamiliar to explore
<code>tidycensus</code> before using <code>urbnindicators</code>.</p>
<p>While <code>tidycensus</code> is versatile and allows users to access
many more datasets (and variables within those datasets) than does
<code>urbnindicators</code>, it can require a significant amount of
knowledge and time to support a robust analysis, leading many users to
fall into common pitfalls without realizing they’ve made an
error(s).</p>
<p>Here’s a typical <code>tidycensus</code> workflow:</p>
<div class="section level3">
<h3 id="identify-variables-to-query">Identify variables to query<a class="anchor" aria-label="anchor" href="#identify-variables-to-query"></a>
</h3>
<p>We load the built-in codebook and search for our construct of
interest (disability). This leaves us 500 variables to choose from.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">acs_codebook</span> <span class="op">=</span> <span class="fu">tidycensus</span><span class="fu">::</span><span class="fu"><a href="https://walker-data.com/tidycensus/reference/load_variables.html" class="external-link">load_variables</a></span><span class="op">(</span>dataset <span class="op">=</span> <span class="st">"acs5"</span>, year <span class="op">=</span> <span class="fl">2022</span><span class="op">)</span></span>
<span></span>
<span><span class="va">acs_codebook</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="va">concept</span>, <span class="st">"Disability"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 4</span></span></span>
<span><span class="co">#&gt;   name       label                                             concept geography</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> B10052_001 Estimate!!Total:                                  Disabi… tract    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> B10052_002 Estimate!!Total:!!With any disability:            Disabi… tract    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> B10052_003 Estimate!!Total:!!With any disability:!!Grandpar… Disabi… tract    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> B10052_004 Estimate!!Total:!!With any disability:!!Grandpar… Disabi… tract    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> B10052_005 Estimate!!Total:!!With any disability:!!Grandpar… Disabi… tract    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> B10052_006 Estimate!!Total:!!With any disability:!!Grandpar… Disabi… tract</span></span></code></pre></div>
<p>Let’s imagine we’re interested in calculating the share of
individuals with a disability; this requires only two variables
(conceptually): the number of people with a disability and the number of
all people.</p>
<p>So which variable(s) do we select? There’s not a clear answer. All
variables relating to disability reflect disability and at least one
other characteristic (e.g., “sex by age by disability status”). If we
want to calculate the percent of all individuals with a disability, we
want to do so using the most robust available variables (i.e., those
that reflect all individuals who reported their disability status),
whereas some variables that reflect disability may have smaller counts
because the other characteristics combined with disability status (e.g.,
health insurance coverage status) may be available only for a subset of
the individuals for whom disability status is available.</p>
<p>Putting these challenges aside, let’s imagine we select the table of
variables prefixed “B18101”, for “Sex by Age by Disability”. We think
that most respondents who are asked about their disability status will
also have been asked about their sex and age. We then pass this to
<code>tidycensus</code> as:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_disability</span> <span class="op">=</span> <span class="fu"><a href="https://walker-data.com/tidycensus/reference/get_acs.html" class="external-link">get_acs</a></span><span class="op">(</span></span>
<span>  geography <span class="op">=</span> <span class="st">"county"</span>,</span>
<span>  state <span class="op">=</span> <span class="st">"NJ"</span>, </span>
<span>  year <span class="op">=</span> <span class="fl">2022</span>,</span>
<span>  output <span class="op">=</span> <span class="st">"wide"</span>,</span>
<span>  survey <span class="op">=</span> <span class="st">"acs5"</span>,</span>
<span>  table <span class="op">=</span> <span class="st">"B18101"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Getting data from the 2018-2022 5-year ACS</span></span>
<span><span class="co">#&gt; Loading ACS5 variables for 2022 from table B18101. To cache this dataset for faster access to ACS tables in the future, run this function with `cache_table = TRUE`. You only need to do this once per ACS dataset.</span></span>
<span></span>
<span><span class="va">df_disability</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 21 80</span></span>
<span><span class="va">df_disability</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "GEOID"       "NAME"        "B18101_001E" "B18101_001M" "B18101_002E"</span></span>
<span><span class="co">#&gt;  [6] "B18101_002M" "B18101_003E" "B18101_003M" "B18101_004E" "B18101_004M"</span></span>
<span><span class="co">#&gt; [11] "B18101_005E" "B18101_005M" "B18101_006E" "B18101_006M" "B18101_007E"</span></span>
<span><span class="co">#&gt; [16] "B18101_007M" "B18101_008E" "B18101_008M" "B18101_009E" "B18101_009M"</span></span>
<span><span class="co">#&gt; [21] "B18101_010E" "B18101_010M" "B18101_011E" "B18101_011M" "B18101_012E"</span></span>
<span><span class="co">#&gt; [26] "B18101_012M" "B18101_013E" "B18101_013M" "B18101_014E" "B18101_014M"</span></span>
<span><span class="co">#&gt; [31] "B18101_015E" "B18101_015M" "B18101_016E" "B18101_016M" "B18101_017E"</span></span>
<span><span class="co">#&gt; [36] "B18101_017M" "B18101_018E" "B18101_018M" "B18101_019E" "B18101_019M"</span></span>
<span><span class="co">#&gt; [41] "B18101_020E" "B18101_020M" "B18101_021E" "B18101_021M" "B18101_022E"</span></span>
<span><span class="co">#&gt; [46] "B18101_022M" "B18101_023E" "B18101_023M" "B18101_024E" "B18101_024M"</span></span>
<span><span class="co">#&gt; [51] "B18101_025E" "B18101_025M" "B18101_026E" "B18101_026M" "B18101_027E"</span></span>
<span><span class="co">#&gt; [56] "B18101_027M" "B18101_028E" "B18101_028M" "B18101_029E" "B18101_029M"</span></span>
<span><span class="co">#&gt; [61] "B18101_030E" "B18101_030M" "B18101_031E" "B18101_031M" "B18101_032E"</span></span>
<span><span class="co">#&gt; [66] "B18101_032M" "B18101_033E" "B18101_033M" "B18101_034E" "B18101_034M"</span></span>
<span><span class="co">#&gt; [71] "B18101_035E" "B18101_035M" "B18101_036E" "B18101_036M" "B18101_037E"</span></span>
<span><span class="co">#&gt; [76] "B18101_037M" "B18101_038E" "B18101_038M" "B18101_039E" "B18101_039M"</span></span></code></pre></div>
<p>This returns us 21 observations–one for each county in NJ–along with
an intimidating 80 columns with meaningless names along the lines of
<code>B18101_039E</code>.</p>
</div>
<div class="section level3">
<h3 id="calculating-our-measure-of-interest">Calculating our measure of interest<a class="anchor" aria-label="anchor" href="#calculating-our-measure-of-interest"></a>
</h3>
<p>Now we would need to figure out how to aggregate the needed variables
for both the denominator and numerator in order to calculate a valid “%
Disabled” measure, a task that is feasible but time-intensive and
error-prone.</p>
<p>For an analysis that leverages more than a single measure, and
especially when measures are required from distinct tables, this
workflow is burdensome and creates significant surface area for
undetected errors. To acquire data for multiple years, or for multiple
different types of geographies, also requires repeated calls to
<code><a href="https://walker-data.com/tidycensus/reference/get_acs.html" class="external-link">get_acs()</a></code>.</p>
<p>At the same time, many analysts will be overwhelmed by and unsure how
to combine the margins of error that are returned by
<code><a href="https://walker-data.com/tidycensus/reference/get_acs.html" class="external-link">get_acs()</a></code>, opting simply to drop this critical information
from their analysis as they go about calculating “% Disabled”.</p>
</div>
</div>
<div class="section level2">
<h2 id="using-urbnindicators">Using urbnindicators<a class="anchor" aria-label="anchor" href="#using-urbnindicators"></a>
</h2>
<p><code>urbnindicators</code> abstracts the workflow above behind the
scenes. Instead of a call to <code><a href="https://walker-data.com/tidycensus/reference/get_acs.html" class="external-link">tidycensus::get_acs()</a></code>, a call
to <code><a href="../reference/compile_acs_data.html">urbnindicators::compile_acs_data()</a></code> returns a dataset of
both raw ACS measures and derived estimates (such as the share of all
individuals who are disabled). And that dataset includes a range of
measures–spanning things such as health insurance, employment, housing
costs, and race and ethnicity–not just one variable or table from the
ACS.</p>
<div class="section level3">
<h3 id="acquire-data">Acquire data<a class="anchor" aria-label="anchor" href="#acquire-data"></a>
</h3>
<p>It’s as simple as the call below. Note that you can provide a vector
of years and/or states if you want data over different time periods or
geographies.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_urbnindicators</span> <span class="op">=</span> <span class="fu">urbnindicators</span><span class="fu">::</span><span class="fu"><a href="../reference/compile_acs_data.html">compile_acs_data</a></span><span class="op">(</span></span>
<span>  variables <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  years <span class="op">=</span> <span class="fl">2022</span>,</span>
<span>  geography <span class="op">=</span> <span class="st">"county"</span>,</span>
<span>  states <span class="op">=</span> <span class="st">"NJ"</span>,</span>
<span>  spatial <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt;   |                                                                              |                                                                      |   0%  |                                                                              |                                                                      |   1%  |                                                                              |=                                                                     |   1%  |                                                                              |=                                                                     |   2%  |                                                                              |==                                                                    |   2%  |                                                                              |==                                                                    |   3%  |                                                                              |==                                                                    |   4%  |                                                                              |===                                                                   |   4%  |                                                                              |===                                                                   |   5%  |                                                                              |====                                                                  |   5%  |                                                                              |====                                                                  |   6%  |                                                                              |=====                                                                 |   6%  |                                                                              |=====                                                                 |   7%  |                                                                              |=====                                                                 |   8%  |                                                                              |======                                                                |   8%  |                                                                              |======                                                                |   9%  |                                                                              |=======                                                               |  10%  |                                                                              |=======                                                               |  11%  |                                                                              |========                                                              |  11%  |                                                                              |========                                                              |  12%  |                                                                              |=========                                                             |  12%  |                                                                              |=========                                                             |  13%  |                                                                              |==========                                                            |  14%  |                                                                              |==========                                                            |  15%  |                                                                              |===========                                                           |  15%  |                                                                              |===========                                                           |  16%  |                                                                              |============                                                          |  17%  |                                                                              |============                                                          |  18%  |                                                                              |=============                                                         |  18%  |                                                                              |=============                                                         |  19%  |                                                                              |==============                                                        |  20%  |                                                                              |==============                                                        |  21%  |                                                                              |===============                                                       |  21%  |                                                                              |===============                                                       |  22%  |                                                                              |================                                                      |  22%  |                                                                              |================                                                      |  23%  |                                                                              |=================                                                     |  24%  |                                                                              |=================                                                     |  25%  |                                                                              |==================                                                    |  25%  |                                                                              |==================                                                    |  26%  |                                                                              |===================                                                   |  27%  |                                                                              |===================                                                   |  28%  |                                                                              |====================                                                  |  28%  |                                                                              |====================                                                  |  29%  |                                                                              |=====================                                                 |  30%  |                                                                              |======================                                                |  31%  |                                                                              |======================                                                |  32%  |                                                                              |=======================                                               |  32%  |                                                                              |=======================                                               |  33%  |                                                                              |========================                                              |  34%  |                                                                              |========================                                              |  35%  |                                                                              |=========================                                             |  35%  |                                                                              |=========================                                             |  36%  |                                                                              |==========================                                            |  37%  |                                                                              |==========================                                            |  38%  |                                                                              |===========================                                           |  38%  |                                                                              |===========================                                           |  39%  |                                                                              |============================                                          |  39%  |                                                                              |=============================                                         |  41%  |                                                                              |=============================                                         |  42%  |                                                                              |===============================                                       |  44%  |                                                                              |===============================                                       |  45%  |                                                                              |=====================================                                 |  53%  |                                                                              |======================================                                |  54%  |                                                                              |========================================                              |  57%  |                                                                              |=================================================                     |  71%  |                                                                              |==================================================                    |  72%  |                                                                              |===================================================                   |  72%  |                                                                              |===================================================                   |  73%  |                                                                              |=====================================================                 |  76%  |                                                                              |=========================================================             |  82%  |                                                                              |==========================================================            |  82%  |                                                                              |==========================================================            |  83%  |                                                                              |============================================================          |  86%  |                                                                              |=============================================================         |  87%  |                                                                              |================================================================      |  92%  |                                                                              |======================================================================| 100%</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="analyze-or-visualize-data">Analyze or visualize data<a class="anchor" aria-label="anchor" href="#analyze-or-visualize-data"></a>
</h3>
<p>And now we’re ready to analyze or plot our data. Simplistically:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_urbnindicators</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">matches</a></span><span class="op">(</span><span class="st">"disability.*percent$"</span><span class="op">)</span>, <span class="va">geometry</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">disability_percent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/urbnthemes/man/theme_urbn_map.html" class="external-link">theme_urbn_map</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_colour_continuous.html" class="external-link">scale_fill_continuous</a></span><span class="op">(</span>labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="va"><a href="https://scales.r-lib.org/reference/percent_format.html" class="external-link">percent</a></span>, trans <span class="op">=</span> <span class="st">"reverse"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>      title <span class="op">=</span> <span class="st">"Disability rates appear higher in southern NJ"</span>,</span>
<span>      subtitle <span class="op">=</span> <span class="st">"Disability rates by county, NJ, 2018-2022 ACS"</span>,</span>
<span>      fill <span class="op">=</span> <span class="st">"Population with an ACS-defined disability (%)"</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_wrap.html" class="external-link">str_wrap</a></span><span class="op">(</span><span class="fl">20</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="urbnindicators_files/figure-html/unnamed-chunk-5-1.png" width="100%"></p>
</div>
<div class="section level3">
<h3 id="document-data">Document data<a class="anchor" aria-label="anchor" href="#document-data"></a>
</h3>
<p>There’s a lot happening behind the scenes, so it’s important to
understand what each variable represents and how it was calculated.
<code>urbnindicators</code> includes a codebook as an attribute of the
dataframe returned from <code><a href="../reference/compile_acs_data.html">compile_acs_data()</a></code>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_urbnindicators</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="st">"codebook"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 868 × 3</span></span></span>
<span><span class="co">#&gt;    calculated_variable                     variable_type definition             </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> total_population_universe               Count         This is a raw ACS esti…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> public_assistance_universe              Count         This is a raw ACS esti…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> public_assistance_received              Count         This is a raw ACS esti…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> snap_universe                           Count         This is a raw ACS esti…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> snap_received                           Count         This is a raw ACS esti…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> household_income_quintile_upper_limit_1 Quintile ($)  This is a raw ACS esti…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> household_income_quintile_upper_limit_2 Quintile ($)  This is a raw ACS esti…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> household_income_quintile_upper_limit_3 Quintile ($)  This is a raw ACS esti…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> household_income_quintile_upper_limit_4 Quintile ($)  This is a raw ACS esti…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> household_income_quintile_upper_limit_5 Quintile ($)  This is a raw ACS esti…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 858 more rows</span></span></span></code></pre></div>
<p>The codebook specifies the variable type and provides a definition of
how the variable was calculated. Most (though not all) variables that
are directly available from the ACS are count variables, such as the
number of people receiving public assistance. Many of the variables that
are calculated by <code>urbnindicators</code> are percent variables,
where we divide two count variables.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_urbnindicators</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="st">"codebook"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="va">calculated_variable</span>, <span class="st">"public_assistance"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 3</span></span></span>
<span><span class="co">#&gt;   calculated_variable                variable_type definition                   </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> public_assistance_universe         Count         This is a raw ACS estimate.  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> public_assistance_received         Count         This is a raw ACS estimate.  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> public_assistance_received_percent Percent       Numerator = public_assistanc…</span></span></code></pre></div>
<p>The most common convention is that a percent variable is calculated
by dividing a count variable (e.g.,
<code>public_assistance_received</code>) by the universe variable for
the corresponding table (e.g.,
<code>public_assistance_universe</code>).</p>
<p>But other derived variables are more complex, such as those for
commute mode. Here, we’ve aggregated three counts representing different
types of individual motor vehicle transportation to create the
numerator, while the denominator is the table universe minus individuals
who work from home. This allows us say something along the lines of: “Of
individuals who commute to work, XX% use a motor vehicle as their
primary commute mode.”</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_urbnindicators</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="st">"codebook"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="va">calculated_variable</span>, <span class="st">"means.*motor_vehicle"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 3</span></span></span>
<span><span class="co">#&gt;   calculated_variable                             variable_type definition      </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> means_transportation_work_motor_vehicle_percent Percent       Numerator = mea…</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="so-whats-the-value-add">So What’s the Value Add?<a class="anchor" aria-label="anchor" href="#so-whats-the-value-add"></a>
</h2>
<p>Hopefully the process above has illustrated some of the advantages,
which fall into two buckets: efficiency and reliability.</p>
<ol style="list-style-type: decimal">
<li>
<p>Efficiency:</p>
<ol style="list-style-type: decimal">
<li><p>Sensible decisions about variable and table selection eliminate
the need to hunt for the right variables.</p></li>
<li><p>Raw ACS variables are included alongside pre-calculated
variables, such as percentages, that are not directly available from the
ACS.</p></li>
<li><p>Query multiple years and/or multiple states in a single function
call– no need to loop over your desired years or states.</p></li>
</ol>
</li>
<li>
<p>Reliability:</p>
<ol style="list-style-type: decimal">
<li><p>Alphanumeric variable codes (e.g., <code>B18101_001</code>) are
replaced with meaningful variable names (e.g.,
<code>disability_percent</code>)–eliminating a common source of
confusion and error.</p></li>
<li><p>Data are returned with a codebook that documents how variables
were created and what they represent.</p></li>
<li><p>Behind-the-scenes quality checks help to ensure that calculations
are correct (though users still should verify results
themselves!).</p></li>
</ol>
</li>
</ol>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Will Curran-Groome.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer>
</div>





  </body>
</html>

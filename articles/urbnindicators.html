<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="urbnindicators">
<title>urbnindicators • urbnindicators</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="urbnindicators">
<meta property="og:description" content="urbnindicators">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">urbnindicators</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Unreleased version">0.0.0.9003</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/urbnindicators.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/coefficients-of-variation.html">coefficients-of-variation</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>urbnindicators</h1>
            
      
      
      <div class="d-none name"><code>urbnindicators.Rmd</code></div>
    </div>

    
    
<p>Welcome to <code>urbnindicators</code>. The goal of this package is
to streamline the process of obtaining an analysis-ready dataset, with a
focus on use cases in the social sciences world.</p>
<p>This vignette is organized into three parts:</p>
<ol style="list-style-type: decimal">
<li><p>We first illustrate a common workflow for obtaining American
Community Survey (ACS) data from the Census Bureau (arguably the premier
source of social sciences information about people and places in the
U.S).</p></li>
<li><p>Second, we walk through how <code>urbnindicators</code> can
produce similar outputs (but much more quickly) as compared to the
workflow in (1).</p></li>
<li><p>Lastly, we touch on why and how <code>urbnindicators</code>
provides a more robust and accurate set of data products than might be
obtained through the workflow in (1).</p></li>
</ol>
<div class="section level2">
<h2 id="the-existing-tidycensus-workflow">The Existing <code>tidycensus</code> Workflow<a class="anchor" aria-label="anchor" href="#the-existing-tidycensus-workflow"></a>
</h2>
<p><a href="https://walker-data.com/tidycensus/index.html" class="external-link"><code>tidycensus</code></a>
provides a suite of functions for working with select datasets available
via the Census Bureau’s API (application programming interface) and is
the backbone for all of the data produced by
<code>urbnindicators</code>. While the <code>tidycensus</code> API is
versatile and allows users to access many more datasets (and variables
within those datasets) than does <code>urbnindicators</code>, it can
require a significant amount of knowledge and effort to use
<code>tidycensus</code> to support a robust analysis process, and many
users may fall into common pitfalls without realizing they’ve made an
error(s).</p>
<p>A <code>tidycensus</code> workflow might follow the steps below.</p>
<p>First, we need to identify the names of the variables we’re
interested in. We want to look at the share of the population with a
disability, at the county level, in New Jersey. So we load the variable
index for the corresponding data year and look for variables with
“Disability” in the <code>concept</code> field:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ui-research.github.io/urbnindicators/">urbnindicators</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://walker-data.com/tidycensus/" class="external-link">tidycensus</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://stringr.tidyverse.org" class="external-link">stringr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">acs_codebook</span> <span class="op">=</span> <span class="fu"><a href="https://walker-data.com/tidycensus/reference/load_variables.html" class="external-link">load_variables</a></span><span class="op">(</span>dataset <span class="op">=</span> <span class="st">"acs5"</span>, year <span class="op">=</span> <span class="fl">2022</span><span class="op">)</span></span>
<span><span class="co"># acs_codebook %&gt;% View() # not run</span></span>
<span><span class="va">acs_codebook</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 28152</span></span>
<span><span class="va">acs_codebook</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="va">concept</span>, <span class="st">"Disability"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="op">)</span> </span>
<span><span class="co">#&gt; [1] 506</span></span></code></pre></div>
<p>If you’re working in RStudio, you can filter the codebook via the
point-and-click interface, and if not, you can do so programatically,
subsetting the ~28,000 available variables down to the ~500 that match
the term “Disability”. However, 500 variables is a few orders of
magnitude greater than than the number of variables we actually want
(read: 2): the number of people with a disability and the number of all
people.</p>
<p>So which variable(s) do we select? There’s not a clear answer. All
variables relating to disability reflect disability and at least one
other characteristic (e.g., “sex by age by disability status”). If we
want to calculate the percent of all individuals with a disability, we
want to do so using the most robust available variables (i.e., those
that reflect all individuals who reported their disability status),
whereas some variables that reflect disability may have smaller counts
because the other characteristics combined with disability status (e.g.,
health insurance coverage status, as is the case for “Age by Disability
Status by Health Insurance Coverage Status”) may be available only for a
subset of the individuals for whom disability status is available.</p>
<p>Putting these challenges aside, let’s imagine we select the table of
variables prefixed “B18101”, for “Sex by Age by Disability”. We think
that most respondents who are asked about their disability status will
also have been asked about their sex and age. We then pass this to
<code>tidycensus</code> as:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_disability</span> <span class="op">=</span> <span class="fu"><a href="https://walker-data.com/tidycensus/reference/get_acs.html" class="external-link">get_acs</a></span><span class="op">(</span></span>
<span>  geography <span class="op">=</span> <span class="st">"county"</span>,</span>
<span>  state <span class="op">=</span> <span class="st">"NJ"</span>, </span>
<span>  year <span class="op">=</span> <span class="fl">2022</span>,</span>
<span>  output <span class="op">=</span> <span class="st">"wide"</span>,</span>
<span>  survey <span class="op">=</span> <span class="st">"acs5"</span>,</span>
<span>  table <span class="op">=</span> <span class="st">"B18101"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Getting data from the 2018-2022 5-year ACS</span></span>
<span><span class="co">#&gt; Warning: <span style="color: #00BBBB;">•</span> You have not set a Census API key. Users without a key are limited to 500</span></span>
<span><span class="co">#&gt; queries per day and may experience performance limitations.</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">ℹ</span> For best results, get a Census API key at</span></span>
<span><span class="co">#&gt; http://api.census.gov/data/key_signup.html and then supply the key to the</span></span>
<span><span class="co">#&gt; `census_api_key()` function to use it throughout your tidycensus session.</span></span>
<span><span class="co">#&gt; <span style="color: #555555;">This warning is displayed once per session.</span></span></span>
<span><span class="co">#&gt; Loading ACS5 variables for 2022 from table B18101. To cache this dataset for faster access to ACS tables in the future, run this function with `cache_table = TRUE`. You only need to do this once per ACS dataset.</span></span>
<span></span>
<span><span class="va">df_disability</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 21 80</span></span>
<span></span>
<span><span class="va">df_disability</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 80</span></span></span>
<span><span class="co">#&gt;   GEOID NAME         B18101_001E B18101_001M B18101_002E B18101_002M B18101_003E</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 34001 Atlantic Co…      <span style="text-decoration: underline;">271</span>937         230      <span style="text-decoration: underline;">132</span>458         296        <span style="text-decoration: underline;">7</span>402</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 34003 Bergen Coun…      <span style="text-decoration: underline;">947</span>568         239      <span style="text-decoration: underline;">464</span>867         296       <span style="text-decoration: underline;">24</span>887</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 34005 Burlington …      <span style="text-decoration: underline;">447</span>132         632      <span style="text-decoration: underline;">216</span>373         598       <span style="text-decoration: underline;">11</span>988</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 34007 Camden Coun…      <span style="text-decoration: underline;">517</span>354         252      <span style="text-decoration: underline;">250</span>521         302       <span style="text-decoration: underline;">15</span>839</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 34009 Cape May Co…       <span style="text-decoration: underline;">93</span>727         214       <span style="text-decoration: underline;">45</span>316         259        <span style="text-decoration: underline;">1</span>928</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 34011 Cumberland …      <span style="text-decoration: underline;">143</span>979         325       <span style="text-decoration: underline;">69</span>870         409        <span style="text-decoration: underline;">4</span>844</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 73 more variables: B18101_003M &lt;dbl&gt;, B18101_004E &lt;dbl&gt;, B18101_004M &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   B18101_005E &lt;dbl&gt;, B18101_005M &lt;dbl&gt;, B18101_006E &lt;dbl&gt;, B18101_006M &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   B18101_007E &lt;dbl&gt;, B18101_007M &lt;dbl&gt;, B18101_008E &lt;dbl&gt;, B18101_008M &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   B18101_009E &lt;dbl&gt;, B18101_009M &lt;dbl&gt;, B18101_010E &lt;dbl&gt;, B18101_010M &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   B18101_011E &lt;dbl&gt;, B18101_011M &lt;dbl&gt;, B18101_012E &lt;dbl&gt;, B18101_012M &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   B18101_013E &lt;dbl&gt;, B18101_013M &lt;dbl&gt;, B18101_014E &lt;dbl&gt;, B18101_014M &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   B18101_015E &lt;dbl&gt;, B18101_015M &lt;dbl&gt;, B18101_016E &lt;dbl&gt;, …</span></span></span></code></pre></div>
<p>This returns us 21 observations (one for each county in NJ) along
with an intimidating 80 columns. Now we would need to figure out how to
aggregate the needed variables for both the denominator and numerator in
order to calculate a valid “% Disabled” measure, a task that is feasible
but time-intensive and error-prone (in no small part because each
variable is named with an alphanumeric code rather than a meaningful and
descriptive name). For an analysis that leverages more than a single
measure, and especially when measures are required from distinct tables,
this workflow is burdensome and exposes significant surface area for
undetected errors.</p>
<p>At the same time, many analysts will be overwhelmed by and unsure how
to incorporate the margins of error that are returned by
<code>tidycensus</code>, opting simply to drop this critical information
from their analysis. (See
<code><a href="../articles/coefficients-of-variation.html">vignette("coefficients-of-variation")</a></code> for more on how
<code>urbnindicators</code> provides analysts with quick and actionable
characterizations of margins of error.)</p>
</div>
<div class="section level2">
<h2 id="enter-urbnindicators">Enter <code>urbnindicators</code><a class="anchor" aria-label="anchor" href="#enter-urbnindicators"></a>
</h2>
<p><code>urbnindicators</code> abstracts the workflow above behind the
scenes. In lieu of a call to <code><a href="https://walker-data.com/tidycensus/reference/get_acs.html" class="external-link">tidycensus::get_acs()</a></code>, a call
to <code><a href="../reference/compile_acs_data.html">urbnindicators::compile_acs_data()</a></code> returns a
comprehensive dataframe of both raw ACS measures and derived estimates
(such as the share of all individuals who are disabled).</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_urbnindicators</span> <span class="op">=</span> <span class="fu">urbnindicators</span><span class="fu">::</span><span class="fu"><a href="../reference/compile_acs_data.html">compile_acs_data</a></span><span class="op">(</span></span>
<span>  variables <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  years <span class="op">=</span> <span class="fl">2022</span>,</span>
<span>  geography <span class="op">=</span> <span class="st">"county"</span>,</span>
<span>  states <span class="op">=</span> <span class="st">"NJ"</span>,</span>
<span>  retain_moes <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in urbnindicators::compile_acs_data(variables = NULL, years = 2022, : Variable names and geographies for ACS data products can change between years.</span></span>
<span><span class="co">#&gt; Changes to geographies are particularly significant across decades</span></span>
<span><span class="co">#&gt; (e.g., from 2019 to 2020), but these changes can occur in any year.</span></span>
<span><span class="co">#&gt; Users should ensure that the logic embedded in this function--</span></span>
<span><span class="co">#&gt; which was developed around five-year ACS estimates for 2017-2021--</span></span>
<span><span class="co">#&gt; remains accurate for their use cases. Evaluation of measures and</span></span>
<span><span class="co">#&gt; geographies over time should be thoroughly quality checked.</span></span>
<span><span class="co">#&gt; Getting data from the 2018-2022 5-year ACS</span></span>
<span><span class="co">#&gt; Warning in generate_codebook(variables = colnames(df_calculated_estimates), : 58 variable(s) in the codebook are missing information.</span></span>
<span><span class="co">#&gt; Run [codebook] %&gt;% filter(is.na(definition)) to identify missingness.</span></span>
<span></span>
<span><span class="va">df_urbnindicators</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1]   21 1320</span></span></code></pre></div>
<p>While this call returns us the same 21 observations (one per county
in NJ), it returns us some 1,300 columns. Woah. Even when we subset to
those matching “disability”, we still have 79 columns (the same columns
available from our <code><a href="https://walker-data.com/tidycensus/reference/get_acs.html" class="external-link">tidycensus::get_acs()</a></code> call, plus
one).</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_urbnindicators</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">matches</a></span><span class="op">(</span><span class="st">"disability"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="op">)</span> <span class="co">## 79</span></span>
<span><span class="co">#&gt; [1] 79</span></span></code></pre></div>
<p>This is because <code>urbnindicators</code> makes the same
<code><a href="https://walker-data.com/tidycensus/reference/get_acs.html" class="external-link">tidycensus::get_acs()</a></code> query as illustrated above. Indeed,
if the 80 columns returned via our workflow above were intimidating,
1,300 columns is likely… more intimidating. This reflects a design
choice underlying <code>urbnindicators</code>–the package returns very
large datasets, but it structures them such that analysts can use simple
and familiar approaches to navigating the data, while benefiting from
having a diverse array of measures in a single dataset.</p>
<p>The primary differences between <code>urbnindicators</code> and
<code>tidycensus</code> outputs are that returned columns have
descriptive names (e.g.,
<code>sex_by_age_by_disability_status_female_75_years_over_with_a_disability</code>),
and–importantly–that derived variables are included:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_urbnindicators</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">GEOID</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">matches</a></span><span class="op">(</span><span class="st">"disability.*percent"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 21 × 2</span></span></span>
<span><span class="co">#&gt;    GEOID disability_percent</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 34001             0.142 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 34003             0.083<span style="text-decoration: underline;">1</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 34005             0.116 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 34007             0.145 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 34009             0.150 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 34011             0.148 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 34013             0.117 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 34015             0.127 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 34017             0.086<span style="text-decoration: underline;">5</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 34019             0.087<span style="text-decoration: underline;">6</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 11 more rows</span></span></span></code></pre></div>
<p>Indeed, the string-matching approach used above, with the pattern
<code>select(matches("variable_of_interest.*percent$"))</code>, is key
to navigating the 1,300 variables returned by
<code><a href="../reference/compile_acs_data.html">urbnindicators::compile_acs_data()</a></code>. Because variables are
named semantically (i.e., their names have meaning and are not simply
the default alphanumeric variable codes), and because derived percent
variables always end in <code>percent</code>, this flexible pattern can
identify standardized measures that are ready for analysis. (As a
reminder: <code>".*"</code> matches an unlimited number of characters,
while <code>"$"</code> matches the end of a string.
<code>select(matches("variable_of_interest.*percent$"))</code> says:
match columns with names containing “variable_of_interest”, followed by
any number of characters, and that end in “percent”).</p>
<p>For a look at all derived percent variables:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_urbnindicators</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">matches</a></span><span class="op">(</span><span class="st">"percent$"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="co"># 230+</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span> <span class="co"># but we'll just take a look at a few for now</span></span>
<span><span class="co">#&gt;  [1] "ability_speak_english_less_than_very_well_percent"</span></span>
<span><span class="co">#&gt;  [2] "ability_speak_english_very_well_better_percent"   </span></span>
<span><span class="co">#&gt;  [3] "age_10_14_years_percent"                          </span></span>
<span><span class="co">#&gt;  [4] "age_15_17_years_percent"                          </span></span>
<span><span class="co">#&gt;  [5] "age_18_19_years_percent"                          </span></span>
<span><span class="co">#&gt;  [6] "age_20_years_percent"                             </span></span>
<span><span class="co">#&gt;  [7] "age_21_years_percent"                             </span></span>
<span><span class="co">#&gt;  [8] "age_22_24_years_percent"                          </span></span>
<span><span class="co">#&gt;  [9] "age_25_29_years_percent"                          </span></span>
<span><span class="co">#&gt; [10] "age_30_34_years_percent"</span></span></code></pre></div>
<p><code><a href="../reference/compile_acs_data.html">urbnindicators::compile_acs_data()</a></code> also returns a
codebook as an attribute of the returned dataframe. Want to know more
about how
<code>cost_burdened_30percentormore_incomeslessthan35000_percent</code>
was calculated, or what the universe for that measure is? No
problem:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## NOTE: this functionality is not (yet) incorporated into the package!</span></span>
<span><span class="co"># df_urbnindicators %&gt;%</span></span>
<span><span class="co">#   attr("codebook")</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="so-why-urbnindicators">So Why <code>urbnindicators</code>?<a class="anchor" aria-label="anchor" href="#so-why-urbnindicators"></a>
</h2>
<p>Good question. Hopefully the process above has illustrated some of
the advantages, but to recap, we see two sets of advantages.</p>
<ol style="list-style-type: decimal">
<li>
<p><strong><code>urbnindicators</code> saves time</strong> by:</p>
<ol style="list-style-type: decimal">
<li><p>Making sensible decisions about variable and table selection;
and</p></li>
<li><p>Calculating common measures (typically percentages) behind the
scenes.</p></li>
<li><p>While not illustrated here, <code>urbnindicators</code> also
allows for multi-year and multi-geography queries by default, whereas
<code>tidycensus</code> does not support these approaches (there is
support for multi-geography queries at some geographic levels in
<code>tidycensus</code>; <code>urbnindicators</code> extends this to all
geographies), and instead users have to loop over desired years and
geographies.</p></li>
</ol>
</li>
<li>
<p><strong><code>urbnindicators</code> improves the reliability of
the data query and measure creation process</strong> by:</p>
<ol style="list-style-type: decimal">
<li><p>Replacing alphanumeric variable codes (e.g.,
<code>B18101_001</code> with meaningful variable names (e.g.,
<code>disability_percent</code>);</p></li>
<li><p>Returning a codebook attached to the primary dataframe that
documents how variables were created and what they represent;</p></li>
<li><p>Running default data quality checks on generated measures (plus
lots of baked-in quality checks as the underlying package code has been
developed and tested); and</p></li>
<li><p>Producing out-of-the-box summaries of measure reliability via
<code>urbnindicators::calculate_coefficient_of_variation()</code>, which
leverages the margins of error associated with each measure to assess
the quality of estimates across all queried geographies. (See
<code><a href="../articles/coefficients-of-variation.html">vignette("coefficients-of-variation")</a></code> for more.)</p></li>
</ol>
</li>
</ol>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Will Curran-Groome.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>

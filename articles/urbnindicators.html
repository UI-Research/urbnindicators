<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>urbnindicators • urbnindicators</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="urbnindicators">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">urbnindicators</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Unreleased version">0.0.0.9301</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/urbnindicators.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/codebook.html">The urbnindicators Codebook</a></li>
    <li><a class="dropdown-item" href="../articles/design-philosophy.html">Design Philosophy</a></li>
    <li><a class="dropdown-item" href="../articles/quantified-survey-error.html">Drawing Inferences while Accounting for Survey Error</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">



<script src="urbnindicators_files/core-js-2.5.3/shim.min.js"></script><script src="urbnindicators_files/react-18.2.0/react.min.js"></script><script src="urbnindicators_files/react-18.2.0/react-dom.min.js"></script><script src="urbnindicators_files/reactwidget-2.0.0/react-tools.js"></script><link href="urbnindicators_files/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="urbnindicators_files/htmlwidgets-1.6.4/htmlwidgets.js"></script><link href="urbnindicators_files/reactable-0.4.4/reactable.css" rel="stylesheet">
<script src="urbnindicators_files/reactable-binding-0.4.4/reactable.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>urbnindicators</h1>
            
      

      <div class="d-none name"><code>urbnindicators.Rmd</code></div>
    </div>

    
    
<p>This vignette is organized into three parts:</p>
<ol style="list-style-type: decimal">
<li><p>We illustrate a typical workflow for obtaining American Community
Survey (ACS) data using <code><a href="https://walker-data.com/tidycensus/" class="external-link">library(tidycensus)</a></code>.</p></li>
<li><p>We show how <code><a href="https://ui-research.github.io/urbnindicators/">library(urbnindicators)</a></code> can produce
similar outputs, but with much less code and effort.</p></li>
<li><p>We highlight how <code><a href="https://ui-research.github.io/urbnindicators/">library(urbnindicators)</a></code> provides
metadata and improves the quality and reliability of the analysis
process.</p></li>
</ol>
<div class="section level2">
<h2 id="a-typical-workflow">A Typical Workflow<a class="anchor" aria-label="anchor" href="#a-typical-workflow"></a>
</h2>
<p><a href="https://walker-data.com/tidycensus/index.html" class="external-link"><strong>tidycensus</strong></a>
provides a suite of functions for working with ACS data in R. In fact,
<code><a href="https://ui-research.github.io/urbnindicators/">library(urbnindicators)</a></code> is built on top of
<code><a href="https://walker-data.com/tidycensus/" class="external-link">library(tidycensus)</a></code>, and we highly encourage those who are
unfamiliar to explore <code><a href="https://walker-data.com/tidycensus/" class="external-link">library(tidycensus)</a></code> before using
<code><a href="https://ui-research.github.io/urbnindicators/">library(urbnindicators)</a></code>.</p>
<p>While <code>tidycensus</code> is versatile and allows users to access
many more datasets (and variables within those datasets) than does
<code><a href="https://ui-research.github.io/urbnindicators/">library(urbnindicators)</a></code>, it can require a significant
amount of knowledge and time to support a robust analysis, leading many
users to fall into common pitfalls without realizing they’ve made an
error(s).</p>
<div class="section level3">
<h3 id="identify-variables-to-query">Identify variables to query<a class="anchor" aria-label="anchor" href="#identify-variables-to-query"></a>
</h3>
<p>We load the built-in codebook and search for our construct of
interest (disability). This leaves us 500 variables to choose from.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">acs_codebook</span> <span class="op">=</span> <span class="fu">tidycensus</span><span class="fu">::</span><span class="fu"><a href="https://walker-data.com/tidycensus/reference/load_variables.html" class="external-link">load_variables</a></span><span class="op">(</span>dataset <span class="op">=</span> <span class="st">"acs5"</span>, year <span class="op">=</span> <span class="fl">2022</span><span class="op">)</span></span>
<span></span>
<span><span class="va">acs_codebook</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="va">concept</span>, <span class="st">"Disability"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">reactable</span><span class="fu">::</span><span class="fu"><a href="https://glin.github.io/reactable/reference/reactable.html" class="external-link">reactable</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="reactable html-widget html-fill-item" id="htmlwidget-ac96cb3ee4656e2e9ec3" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-ac96cb3ee4656e2e9ec3">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"name":["B10052_001","B10052_002","B10052_003","B10052_004","B10052_005","B10052_006"],"label":["Estimate!!Total:","Estimate!!Total:!!With any disability:","Estimate!!Total:!!With any disability:!!Grandparent responsible for own grandchildren under 18 years:","Estimate!!Total:!!With any disability:!!Grandparent responsible for own grandchildren under 18 years:!!30 to 59 years","Estimate!!Total:!!With any disability:!!Grandparent responsible for own grandchildren under 18 years:!!60 years and over","Estimate!!Total:!!With any disability:!!Grandparent not responsible for own grandchildren under 18 years"],"concept":["Disability Status of Grandparents Living With Own Grandchildren Under 18 Years by Responsibility for Own Grandchildren and Age of Grandparent","Disability Status of Grandparents Living With Own Grandchildren Under 18 Years by Responsibility for Own Grandchildren and Age of Grandparent","Disability Status of Grandparents Living With Own Grandchildren Under 18 Years by Responsibility for Own Grandchildren and Age of Grandparent","Disability Status of Grandparents Living With Own Grandchildren Under 18 Years by Responsibility for Own Grandchildren and Age of Grandparent","Disability Status of Grandparents Living With Own Grandchildren Under 18 Years by Responsibility for Own Grandchildren and Age of Grandparent","Disability Status of Grandparents Living With Own Grandchildren Under 18 Years by Responsibility for Own Grandchildren and Age of Grandparent"],"geography":["tract","tract","tract","tract","tract","tract"]},"columns":[{"id":"name","name":"name","type":"character"},{"id":"label","name":"label","type":"character"},{"id":"concept","name":"concept","type":"character"},{"id":"geography","name":"geography","type":"character"}],"dataKey":"ff9fa261ac94f7275c7e85d896fe52c1"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script><p>Let’s imagine we’re interested in calculating the share of
individuals with a disability; this requires only two variables
(conceptually): the number of people with a disability and the number of
all people.</p>
<p>So which variable(s) do we select? There’s not a clear answer. All
variables relating to disability reflect disability and at least one
other characteristic (e.g., “sex by age by disability status”). If we
want to calculate the percent of all individuals with a disability, we
want to do so using the most robust available variables (i.e., those
that reflect all individuals who reported their disability status),
whereas some variables that reflect disability may have smaller counts
because the other characteristics combined with disability status (e.g.,
health insurance coverage status) may be available only for a subset of
the individuals for whom disability status is available.</p>
<p>Putting these challenges aside, let’s imagine we select the table of
variables prefixed “B18101”, for “Sex by Age by Disability”. We think
that most respondents who respond about their disability status will
also have responded about their sex and age. We then pass this to
<code><a href="https://walker-data.com/tidycensus/" class="external-link">library(tidycensus)</a></code> as:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_disability</span> <span class="op">=</span> <span class="fu">get_acs</span><span class="op">(</span></span>
<span>  geography <span class="op">=</span> <span class="st">"county"</span>,</span>
<span>  state <span class="op">=</span> <span class="st">"NJ"</span>, </span>
<span>  year <span class="op">=</span> <span class="fl">2022</span>,</span>
<span>  output <span class="op">=</span> <span class="st">"wide"</span>,</span>
<span>  survey <span class="op">=</span> <span class="st">"acs5"</span>,</span>
<span>  table <span class="op">=</span> <span class="st">"B18101"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df_disability</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 21 80</span></span>
<span><span class="va">df_disability</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "GEOID"       "NAME"        "B18101_001E" "B18101_001M" "B18101_002E"</span></span></code></pre></div>
<p>This returns us 21 observations–one for each county in NJ–along with
an intimidating 80 columns with meaningless names along the lines of
<code>B18101_039E</code>.</p>
</div>
<div class="section level3">
<h3 id="calculating-our-measure-of-interest">Calculating our measure of interest<a class="anchor" aria-label="anchor" href="#calculating-our-measure-of-interest"></a>
</h3>
<p>Now we would need to figure out how to aggregate the needed variables
for both the denominator and numerator in order to calculate a valid “%
Disabled” measure, a task that is feasible but time-intensive and
error-prone.</p>
<p>For an analysis that leverages more than a single measure, and
especially when measures are required from distinct tables, this
workflow is burdensome and creates significant surface area for
undetected errors. To acquire data for multiple years, or for multiple
different types of geographies, also requires repeated calls to
<code><a href="https://walker-data.com/tidycensus/reference/get_acs.html" class="external-link">tidycensus::get_acs()</a></code>.</p>
<p>At the same time, many analysts will be overwhelmed by and unsure how
to combine the margins of error that are returned by
<code><a href="https://walker-data.com/tidycensus/reference/get_acs.html" class="external-link">tidycensus::get_acs()</a></code>, opting simply to drop this critical
information from their analysis as they go about calculating “%
Disabled”.</p>
</div>
</div>
<div class="section level2">
<h2 id="using-urbnindicators">Using urbnindicators<a class="anchor" aria-label="anchor" href="#using-urbnindicators"></a>
</h2>
<p><code><a href="https://ui-research.github.io/urbnindicators/">library(urbnindicators)</a></code> abstracts the workflow above
behind the scenes. Instead of a call to
<code><a href="https://walker-data.com/tidycensus/reference/get_acs.html" class="external-link">tidycensus::get_acs()</a></code>, a call to
<code><a href="../reference/compile_acs_data.html">urbnindicators::compile_acs_data()</a></code> returns a dataset of
both raw ACS measures and derived estimates (such as the share of all
individuals who are disabled). And that dataset includes a range of
measures–-spanning things such as health insurance, employment, housing
costs, and race and ethnicity–-not just one variable or table from the
ACS.</p>
<div class="section level3">
<h3 id="acquire-data">Acquire data<a class="anchor" aria-label="anchor" href="#acquire-data"></a>
</h3>
<p>It’s as simple as the call below. Note that you can provide a vector
of years and/or states if you want data over different time periods or
geographies.</p>
<p>Note that selecting more geographic units–either by selecting a
<code>geography</code> option comprising more units, by selecting more
states, or selecting more years–can significantly increase the query
time. A tract-level query of the entire US can take 30+ minutes.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_urbnindicators</span> <span class="op">=</span> <span class="fu">urbnindicators</span><span class="fu">::</span><span class="fu"><a href="../reference/compile_acs_data.html">compile_acs_data</a></span><span class="op">(</span></span>
<span>  years <span class="op">=</span> <span class="fl">2022</span>,</span>
<span>  geography <span class="op">=</span> <span class="st">"county"</span>,</span>
<span>  states <span class="op">=</span> <span class="st">"NJ"</span>,</span>
<span>  spatial <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Downloading: 46 kB     Downloading: 46 kB     Downloading: 46 kB     Downloading: 46 kB     Downloading: 70 kB     Downloading: 70 kB     Downloading: 120 kB     Downloading: 120 kB     Downloading: 120 kB     Downloading: 120 kB     Downloading: 140 kB     Downloading: 140 kB     Downloading: 190 kB     Downloading: 190 kB     Downloading: 190 kB     Downloading: 190 kB     Downloading: 220 kB     Downloading: 220 kB     Downloading: 360 kB     Downloading: 360 kB     Downloading: 360 kB     Downloading: 360 kB     Downloading: 360 kB     Downloading: 360 kB     Downloading: 2 MB     Downloading: 2 MB     Downloading: 3.7 MB     Downloading: 3.7 MB     Downloading: 5.3 MB     Downloading: 5.3 MB     Downloading: 7 MB     Downloading: 7 MB     Downloading: 8.6 MB     Downloading: 8.6 MB     Downloading: 10 MB     Downloading: 10 MB     Downloading: 12 MB     Downloading: 12 MB     Downloading: 12 MB     Downloading: 12 MB     Downloading: 12 MB     Downloading: 12 MB</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="analyze-or-visualize-data">Analyze or visualize data<a class="anchor" aria-label="anchor" href="#analyze-or-visualize-data"></a>
</h3>
<p>And now we’re ready to analyze or plot our data. Simplistically:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_urbnindicators</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="fu">matches</span><span class="op">(</span><span class="st">"disability.*percent$"</span><span class="op">)</span>, <span class="va">geometry</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">geom_sf</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>fill <span class="op">=</span> <span class="va">disability_percent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">theme_urbn_map</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">scale_fill_continuous</span><span class="op">(</span>labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="va"><a href="https://scales.r-lib.org/reference/percent_format.html" class="external-link">percent</a></span>, trans <span class="op">=</span> <span class="st">"reverse"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">labs</span><span class="op">(</span></span>
<span>      title <span class="op">=</span> <span class="st">"Disability rates appear higher in southern NJ"</span>,</span>
<span>      subtitle <span class="op">=</span> <span class="st">"Disability rates by county, NJ, 2018-2022 ACS"</span>,</span>
<span>      fill <span class="op">=</span> <span class="st">"Population with an ACS-defined disability (%)"</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu">str_wrap</span><span class="op">(</span><span class="fl">20</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="urbnindicators_files/figure-html/unnamed-chunk-5-1.png" width="100%"></p>
</div>
<div class="section level3">
<h3 id="document-data">Document data<a class="anchor" aria-label="anchor" href="#document-data"></a>
</h3>
<p>There’s a lot happening behind the scenes, so it’s important to
understand what each variable represents and how it was calculated.
<code><a href="https://ui-research.github.io/urbnindicators/">library(urbnindicators)</a></code> includes a codebook as an attribute
of the dataframe returned from
<code><a href="../reference/compile_acs_data.html">urbnindicators::compile_acs_data()</a></code>. View and navigate
through the <a href="articles/codebook.html">full codebook here</a>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_urbnindicators</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="st">"codebook"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">20</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">reactable</span><span class="fu">::</span><span class="fu"><a href="https://glin.github.io/reactable/reference/reactable.html" class="external-link">reactable</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="reactable html-widget html-fill-item" id="htmlwidget-e5c8c404fe174e4c81bd" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-e5c8c404fe174e4c81bd">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"calculated_variable":["total_population_universe","public_assistance_universe","public_assistance_received","snap_universe","snap_received","household_income_quintile_upper_limit_1","household_income_quintile_upper_limit_2","household_income_quintile_upper_limit_3","household_income_quintile_upper_limit_4","household_income_quintile_upper_limit_5","household_income_quintile_mean_1","household_income_quintile_mean_2","household_income_quintile_mean_3","household_income_quintile_mean_4","household_income_quintile_mean_5","household_income_quintile_mean_6","household_income_quintile_share_aggregate_1","household_income_quintile_share_aggregate_2","household_income_quintile_share_aggregate_3","household_income_quintile_share_aggregate_4"],"variable_type":["Count","Count","Count","Count","Count","Quintile ($)","Quintile ($)","Quintile ($)","Quintile ($)","Quintile ($)","Quintile ($)","Quintile ($)","Quintile ($)","Quintile ($)","Quintile ($)","Quintile ($)","Quintile ($)","Quintile ($)","Quintile ($)","Quintile ($)"],"definition":["This is a raw ACS estimate.","This is a raw ACS estimate.","This is a raw ACS estimate.","This is a raw ACS estimate.","This is a raw ACS estimate.","This is a raw ACS estimate.","This is a raw ACS estimate.","This is a raw ACS estimate.","This is a raw ACS estimate.","This is a raw ACS estimate.","This is a raw ACS estimate.","This is a raw ACS estimate.","This is a raw ACS estimate.","This is a raw ACS estimate.","This is a raw ACS estimate.","This is a raw ACS estimate.","This is a raw ACS estimate.","This is a raw ACS estimate.","This is a raw ACS estimate.","This is a raw ACS estimate."]},"columns":[{"id":"calculated_variable","name":"calculated_variable","type":"character"},{"id":"variable_type","name":"variable_type","type":"character"},{"id":"definition","name":"definition","type":"character"}],"dataKey":"9c1d00b062909b6b570c0aac9070abf0"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script><p>The codebook specifies the variable type and provides a definition of
how the variable was calculated. Most (though not all) variables that
are directly available from the ACS are count variables, such as the
number of people receiving public assistance. Many of the variables that
are calculated by <code><a href="https://ui-research.github.io/urbnindicators/">library(urbnindicators)</a></code> are percent
variables, where we divide two count variables.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_urbnindicators</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="st">"codebook"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu">str_detect</span><span class="op">(</span><span class="va">calculated_variable</span>, <span class="st">"public_assistance"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">reactable</span><span class="fu">::</span><span class="fu"><a href="https://glin.github.io/reactable/reference/reactable.html" class="external-link">reactable</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="reactable html-widget html-fill-item" id="htmlwidget-36aa3d2a04d42bbc2145" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-36aa3d2a04d42bbc2145">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"calculated_variable":["public_assistance_universe","public_assistance_received","public_assistance_received_percent"],"variable_type":["Count","Count","Percent"],"definition":["This is a raw ACS estimate.","This is a raw ACS estimate.","Numerator = public_assistance_received (B19058_002). Denominator = public_assistance_universe (B19058_001)."]},"columns":[{"id":"calculated_variable","name":"calculated_variable","type":"character"},{"id":"variable_type","name":"variable_type","type":"character"},{"id":"definition","name":"definition","type":"character"}],"dataKey":"06324bfdb7742995a9331d1a7a1d612e"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script><p>The most common convention is that a percent variable is calculated
by dividing a count variable (e.g.,
<code>public_assistance_received</code>) by the universe variable for
the corresponding table (e.g., <code>public_assistance_universe</code>).
But other derived variables are more complex, such as those for commute
mode. Here, we’ve aggregated three counts representing different types
of individual motor vehicle transportation to create the numerator,
while the denominator is the table universe minus individuals who work
from home.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_urbnindicators</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="st">"codebook"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu">str_detect</span><span class="op">(</span><span class="va">calculated_variable</span>, <span class="st">"means.*motor_vehicle"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">reactable</span><span class="fu">::</span><span class="fu"><a href="https://glin.github.io/reactable/reference/reactable.html" class="external-link">reactable</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="reactable html-widget html-fill-item" id="htmlwidget-febe03efa1a2d8d52a86" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-febe03efa1a2d8d52a86">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"calculated_variable":["means_transportation_work_motor_vehicle_percent"],"variable_type":["Percent"],"definition":["Numerator = means_transportation_work_car_truck_van (B08301_002), means_transportation_work_taxicab (B08301_016), means_transportation_work_motorcycle (B08301_017). Denominator = means_transportation_work_universe (B08301_001) - means_transportation_work_worked_from_home (B08301_021)."]},"columns":[{"id":"calculated_variable","name":"calculated_variable","type":"character"},{"id":"variable_type","name":"variable_type","type":"character"},{"id":"definition","name":"definition","type":"character"}],"dataKey":"52555624c8b1a5187056f59f1a46ee27"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script><p>This allows us say something along the lines of: “Of individuals who
commute to work, XX% use a motor vehicle as their primary commute
mode.”</p>
</div>
</div>
<div class="section level2">
<h2 id="so-whats-the-value-add">So What’s the Value Add?<a class="anchor" aria-label="anchor" href="#so-whats-the-value-add"></a>
</h2>
<p>Hopefully the process above has illustrated some of the advantages,
which fall into two buckets: efficiency and reliability.</p>
<ol style="list-style-type: decimal">
<li>
<p>Speed:</p>
<ol style="list-style-type: decimal">
<li><p>Sensible decisions about variable and table selection eliminate
the need to hunt for the right variables.</p></li>
<li><p>Raw ACS variables are included alongside pre-calculated
variables, such as percentages, that are not directly available from the
ACS.</p></li>
<li><p>Query multiple years and/or multiple states in a single function
call– no need to loop over your desired years or states.</p></li>
</ol>
</li>
<li>
<p>Accuracy:</p>
<ol style="list-style-type: decimal">
<li><p>Alphanumeric variable codes (e.g., <code>B18101_001</code>) are
replaced with meaningful variable names (e.g.,
<code>disability_percent</code>)–eliminating a common source of
confusion and error.</p></li>
<li><p>Data are returned with a codebook that documents how variables
were created and what they represent.</p></li>
<li><p>Behind-the-scenes quality checks help to ensure (though do not
guarantee) that calculations are correct, though users still should
verify results themselves.</p></li>
<li><p>Both straight-from-the-ACS and derived variables include margins
of error and coefficients of variation that enable users to conduct
statistical significance testing and can inform other data quality
decision-making, such as whether to suppress certain observations or
whether data should be aggregated–across geographies or across
variables, or both–to improve the accuracy of estimates.</p></li>
</ol>
</li>
</ol>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Will Curran-Groome.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer>
</div>





  </body>
</html>
